<html>
  <head>
		<script src="lib-js/aframe-v0.9.2.js"></script>
    <script src="lib-js/aframe-teleport-controls.js"></script>
    <!--
    <script src="https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/v1.3.2/dist/aframe-altspace-component.min.js"></script>
		<script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    -->

    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/super-hands@3.0.0/dist/super-hands.min.js"></script>

    <script src="portal-stone.js"></script>
		<script>
		</script>
  </head>
  <body>
    <a-scene>

      <a-assets>
        <a-asset-item id="level-gltf" src="models-dae/Great Plateau Tower/Tower_Assembled.glb"></a-asset-item>
        <a-asset-item id="level-collider-obj" src="models-dae/Great Plateau Tower/Tower_Assembled.obj"></a-asset-item>

        <a-asset-item id="grayfox" src="models-gltf/GrayFox.glb"></a-asset-item>
        <a-asset-item id="wiifittrainer" src="models-gltf/WiiFitTrainer.glb"></a-asset-item>
        <a-asset-item id="akiraasset" src="models-gltf/Akira.glb"></a-asset-item>

        <a-asset-item id="tailsdoll" src="models-gltf/TailsDoll.gltf"></a-asset-item>
        <a-asset-item id="emeraldshard" src="models-gltf/EmeraldPiece.gltf"></a-asset-item>

        <a-asset-item id="assisttrophy" src="models-gltf/AssistTrophy.glb"></a-asset-item>
        <a-asset-item id="homerunbat" src="models-gltf/HomeRunBat.glb"></a-asset-item>

        <a-asset-item id="vr_controller_vive-obj" src="models-obj/Controllers/vr_controller_vive.obj"></a-asset-item>
        <a-asset-item id="vr_controller_vive-mtl" src="models-obj/Controllers/vr_controller_vive.mtl"></a-asset-item>

        <a-asset-item id="vr_controller_daydream-obj" src="models-obj/Controllers/vr_controller_daydream.obj"></a-asset-item>
        <a-asset-item id="vr_controller_daydream-mtl" src="models-obj/Controllers/vr_controller_daydream.mtl"></a-asset-item>

        <a-asset-item id="gear_vr_controller-obj" src="models-obj/Controllers/gear_vr_controller.obj"></a-asset-item>
        <a-asset-item id="gear_vr_controller-mtl" src="models-obj/Controllers/gear_vr_controller.mtl"></a-asset-item>

				<img id="portal-stone-texture" src="models-obj/PastVillage/mr_064k_pcueye.png">
				<a-mixin id="portal-stone-mixin"
								 geometry="primitive: box" scale="0.8 0.3 0.8"
								 material="src: #portal-stone-texture;"></a-mixin>
				<a-mixin id="old-font-mixin"
								 text="font: fonts/eaglelake/EagleLake-Regular.json;
								       shader: msdf;
								       color: #222210;"></a-mixin>
				<a-mixin id="scary-font-mixin"
								 text="font: fonts/creepstercaps/CreepsterCaps-Regular.json;
								       shader: msdf;
								       color: #740101;"></a-mixin>

        <img id="sky" src="textures/sky.png">
        <img id="sunset" src="textures/sunset2.jpg">

		    <audio id="mystic-ruins-music" src="audio/MysticRuins.mp3"></audio>
		    <audio id="ocean-waves" src="audio/CrispOceanWaves.mp3"></audio>
      </a-assets>

			<a-entity id="cameraRig" portal-traveller="1">
	      <!-- camera -->
	      <a-camera id="head" wasd-controls look-controls></a-camera>
	      <!-- hand controls -->
			  <!--
        super-hands hand-controls="right"
				-->
	      <a-entity id="right-hand"
                  teleport-controls="type: line; collisionEntities: #tower-level-collider; cameraRig: #cameraRig; teleportOrigin: #head; interval: 50; curveShootingSpeed: 8; curveNumberPoints: 60; landingMaxAngle: 60; maxLength: 30;"
                  teleport-log
                  controller-cursor
                  laser-controls
                  tracked-controls
                  vive-controls="hand: right;"

                  daydream-controls
                  gearvr-controls
									>
									<a-box scale="0.035 0.015	0.07" color="#006666"></a-box>
				</a-entity>
	    </a-entity>

      <!--
      <a-entity position="0 -640 0" obj-model="obj: #level-obj; mtl: #level-mtl"></a-entity>
      -->

      <a-light type="ambient" color="#FFF"></a-light>
      <a-sky position="0 -1000 0" rotation="0 140 0" src="#sunset"></a-sky>

      <!--
      <a-gltf-model id="village-level" position="0 -640 0" src="#level-gltf"></a-gltf-model>
      <a-obj-model id="village-level" position="0 -157.5 0" scale="0.25 0.25 0.25" src="#level-obj" mtl="#level-mtl"></a-obj-model>

      			<a-entity position="0 -100 30"
      								sound="src: #mystic-ruins-music; maxDistance: 10000;
      											 refDistance: 10; volume: 0.35;
      											 loop: true; autoplay: true;"
      			></a-entity>
      			<a-entity position="0 -100 -200"
      								sound="src: #ocean-waves; maxDistance: 400;
      											 refDistance: 3; rolloffFactor: 5; volume: 1.3;
      											 loop: true; autoplay: true;"
      			></a-entity>

      -->
			<!-- LEVEL MODELS -->
      <!-- <a-gltf-model id="tower-level" position="0 -78.7 0" scale="0.125 0.125 0.125" src="#level-gltf"></a-obj-model> -->
      <a-gltf-model id="tower-level" position="0 0 0" scale="5 5 5" src="#level-gltf">
        <a-obj-model id="tower-level-collider"
                     position="0 0 0" scale="1 1 1"
                     src="#level-collider-obj" visible="false"
                     static-body
                     ></a-obj-model>
      </a-gltf-model>
      <a-light type="directional" position = "0 2.5 -10" intensity="15" distance="50" color="#f3e2be"></a-light>
      <a-light type="point" position = "4.8 4 2.2" intensity="45" distance="5" color="#f3e2be"></a-light>


      <!-- The Whole Gang -->

      <a-gltf-model id="gray-fox" src="#grayfox"
                    position="6.5 0 0" rotation="0 -90 0" scale="4.5 4.5 4.5"
                    animation-mixer="clip: IdleStill;"
                    ></a-gltf-model>

      <a-plane id="note"
							 scale-on-mouseenter="to: 2 2 2"
							 position="1.5 1.3 0"
							 rotation="-30 -90 0"
							 width="0.6" height="0.6"
							 scale="1 1 1"
							 color="#888">
				<a-text value="Hey man, I didn't forget your birthday, but I did get massively sucked into making a VR birthday card, figuring out 3D animation and a bunch of other garbage.  This is just a teaser, there's other fancy stuff I'm putting in late tmrw!"
								align="left" anchor="center" baseline="center"
								shader="msdf"
							  width="0.5" wrap-count="20"
                color="#000"></a-text>
			</a-plane>

      <!--
      <a-gltf-model id="assist-trophy-1" position="2.5 0.37 -0.5" rotation="0 -90 0" scale="1.5 1.5 1.5" src="#assisttrophy"></a-gltf-model>
      <a-gltf-model id="home-run-bat" position="2.5 0.571 0.5" scale="7.5 7.5 7.5" src="#homerunbat"></a-gltf-model>

      <a-gltf-model id="wii-fit-trainer" src="#wiifittrainer"
                    position="5.5 0 -2.5" rotation="0 -80 0" scale="0.095 0.095 0.095"
                    animation-mixer="clip: Stretch;"
                    ></a-gltf-model>
      <a-gltf-model id="akira" src="#akiraasset"
                    position="5.5 0 2.5" rotation="0 -90 0" scale="4.5 4.5 4.5"
                    animation-mixer="clip: Idle;"
                    ></a-gltf-model>
      -->

			<!-- PORTAL STONES -->
      <!--
			<a-entity mixin="portal-stone-mixin"
								id="portal-top-r" portal-stone="targetid: portal-top-l"
						 	  position="2.5 0 0"
			></a-entity>
			<a-entity mixin="portal-stone-mixin"
								id="portal-top-l" portal-stone="targetid: portal-top-r"
						 		position="-2.5 0 0"
			></a-entity>
      -->

			<!-- OTHER ITEMS -->
			<!--
								font="fonts/THAILAND.TTF-msdf.json"
								fontImage="fonts/THAILANDTTF.0.png"
								negate="false"

                <a-plane id="instructions-1"
                         position="-2.87 1.593 0"
                         rotation="-60 90 0"
                         width="1" height="1"
                         material="alphaTest: 1.0;">
                  <a-text value="Click the trackpad and point to teleport.\n\nStepping on a glowing tile warps to the linked tile."
                          align="center" anchor="center" baseline="top"
                          width="1.95" wrap-count="20"
                          mixin="old-font-mixin"></a-text>
                </a-plane>

                <a-plane id="instructions-2"
                         position="2.5 0.06 0"
                         rotation="-90 -90 0"
                         width="1" height="1"
                         material="alphaTest: 1.0;">
                  <a-text value="Legends say the echidnas ran from the setting sun and were driven to madness! Look down carefully, push the limit, and you will find what they found so long ago."
                          align="center" anchor="center" baseline="top"
                          width="1.95" wrap-count="26"
                          mixin="old-font-mixin"></a-text>
                </a-plane>
			-->

      <!--<a-sky color="#ECECEC"></a-sky>-->

    </a-scene>
  </body>
</html>
